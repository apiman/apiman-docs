<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>General Apiman Manager Configuration :: Apiman Documentation</title>
    <link rel="canonical" href="https://www.apiman.io/apiman-docs/installation-guide/2.1.0.Final/manager/configuration.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
<link rel="stylesheet" href="../../../_/css/site-extra.css">
<link rel="stylesheet" href="../../../_/css/vendor/docsearch.min.css">
<link rel="stylesheet" href="../../../_/js/vendor/docsearch.min.js">
<link rel="icon" href="../../../favicon.ico" type="image/x-icon">
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-56678850-3"></script>
    <script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','UA-56678850-3')</script>
    <script>var uiRootPath = '../../../_'</script>
<link rel="icon" href="../../../_/img/apiman/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div id="apiman-logo"></div>
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.apiman.io/apiman-docs">Apiman Documentation</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
      <div class="navbar-item hide-for-print">
        <input id="search-input" type="text" placeholder="Search docs">
      </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://www.apiman.io/latest/index.html">Home</a>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="https://www.apiman.io/latest/download.html">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="installation-guide" data-version="1.5.7.Final">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Installation Guide</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Installation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../index.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../quickstart.html">Quickstart</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Platforms</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../servlet/wildfly.html">WildFly</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../servlet/wildfly.html#_installing_using_docker">Docker</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../servlet/config-guide.html">Config Guide</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../vertx/download.html">Vert.x Gateway</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vertx/download.html#_download_launch">Download &amp; Launch</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../vertx/download.html#_configurations">Configurations</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../vertx/download.html#_elasticsearch">Elasticsearch</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../vertx/download.html#_headless_elasticsearch">Headless ES</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vertx/install.html">Installation Walkthrough</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vertx/config-guide.html">Config Guide</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Gateway</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Registries and Components</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../registries-and-components/overview.html">Registries &amp; Components</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../registries-and-components/jdbc.html">JDBC</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../registries-and-components/elasticsearch.html">Elasticsearch</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../registries-and-components/headless.html">Headless</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../gateway/security.html">Security</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../gateway/security.html#_gateway_api_authentication">Gateway API Authentication</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../gateway/security.html#_mtls_mutual_ssl_endpoint_security">Mutual TLS (MTLS/MSSL)</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Manager</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="configuration.html">General Configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#_logging_in">Logging In</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#_custom_api_catalog">Custom API Catalog</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#_custom_plugin_registry">Custom Plugin Registry</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#_property_replacement_in_policy_config">Policy Config Property Replacement</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="backup-migration.html#_backup_migration">Backup &amp; Migration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="backup-migration.html#_upgrading_to_a_new_apiman_version">Upgrading Apiman</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">How to</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../how-to/elasticsearch.html#_use_elasticsearch_instead_of_an_rdbms">Elasticsearch Instead of RDBMS</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../how-to/elasticsearch.html#_use_standalone_elasticsearch_instancecluster">Standalone Elasticsearch Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../how-to/security.html#_external_keycloak_authentication">External Keycloak Authentication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../how-to/jdbc.html">SQL Metrics Instead of Elasticsearch</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../production.html">Production Guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Gateway</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../gateway/production-gateway.html">Vertx</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../gateway/production-gateway-wildfly.html">Wildfly</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="production-manager.html">Manager</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Installation Guide</span>
    <span class="version">1.5.7.Final</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../core/2.1.0.Final/index.html">Apiman Guides</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../core/2.1.0.Final/index.html">2.1.0.Final</a>
        </li>
        <li class="version">
          <a href="../../../core/1.5.7.Final/index.html">1.5.7.Final</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../welcome/2.1.0.Final/index.html">Apiman Welcome</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../welcome/2.1.0.Final/index.html">2.1.0.Final</a>
        </li>
        <li class="version">
          <a href="../../../welcome/1.5.7.Final/index.html">1.5.7.Final</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../2.1.0.Final/index.html">Installation Guide</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../2.1.0.Final/index.html">2.1.0.Final</a>
        </li>
        <li class="version is-current">
          <a href="../index.html">1.5.7.Final</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../user-guide/2.1.0.Final/index.html">User Guide</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../user-guide/2.1.0.Final/index.html">2.1.0.Final</a>
        </li>
        <li class="version">
          <a href="../../../user-guide/1.5.7.Final/index.html">1.5.7.Final</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../welcome/2.1.0.Final/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Installation Guide</a></li>
    <li>Manager</li>
    <li><a href="configuration.html">General Configuration</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">1.5.7.Final</button>
  <div class="version-menu">
    <a class="version" href="../../2.1.0.Final/manager/configuration.html">2.1.0.Final</a>
    <a class="version is-current" href="configuration.html">1.5.7.Final</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/apiman/apiman-docs-installation-guide/edit/1.x/modules/ROOT/pages/manager/configuration.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">General Apiman Manager Configuration</h1>
<div class="sect1">
<h2 id="_logging_in"><a class="anchor" href="#_logging_in"></a>Logging In</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once Apiman is running, you should be able to log in to the API Manager by pointing your browser at the following URL:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-log hljs" data-lang="log">http://localhost:8080/apimanui/

or

https://localhost:8443/apimanui/</code></pre>
</div>
</div>
<div class="paragraph">
<p>You may log in with credentials <strong>admin/admin123!</strong></p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>We strongly advise that you immediately change the Keycloak admin user&#8217;s password, as well as the <strong><em>admin</em></strong> user found in the <strong><em>apiman</em></strong> realm!</p>
</div>
<div class="paragraph">
<p>You can do that by navigating to <a href="http://localhost:8080/auth/admin/" class="bare">http://localhost:8080/auth/admin/</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_general_configuration"><a class="anchor" href="#_general_configuration"></a>General Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Of course Apiman is made up of a number of different components, many of which can be configured to use various implementations and/or providers.
When downloading and installing Apiman, the default distribution includes reasonable default values for all options.
This section details these options and explains the default values.</p>
</div>
<div class="sect2">
<h3 id="_configuration_properties"><a class="anchor" href="#_configuration_properties"></a>Configuration Properties</h3>
<div class="paragraph">
<p>All of the Apiman WARs share a common configuration file called <strong>apiman.properties</strong>, which can be found in <strong>standalone/configuration</strong>.
This file therefore contains configuration settings for all three applications (API Manager, API Manager UI, API Gateway).</p>
</div>
<div class="paragraph">
<p>Please refer to the <code>apiman.properties</code> file itself, as well as this document, for more information on each property&#8217;s purpose and possible values.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you are running a non-Servlet gateway implementation (e.g. Vert.x), then you should refer to that gateway&#8217;s configuration documentation to understand how to configure it.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_api_manager_database"><a class="anchor" href="#_api_manager_database"></a>API Manager Database</h3>
<div class="paragraph">
<p>The API Manager, by default, is a typical CDI application and uses JPA/Hibernate to persist its data.
The JPA layer requires a data source to connect to a supported database.
When running in WildFly this datasource is made available by deploying the following file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>standalone/deployments/apiman-ds.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>Out of the box this data source is usually a simple H2 configuration, but you can (of course) change it to support whatever database you desire.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;datasources&gt;
  &lt;datasource jndi-name="jdbc/ApiManDT" pool-name="apiman-manager-api" enabled="true"
    use-java-context="true"&gt;
    &lt;connection-url&gt;jdbc:h2:${jboss.server.data.dir}${/}h2${/}apiman-manager-api;MVCC=true&lt;/connection-url&gt;
    &lt;driver&gt;h2&lt;/driver&gt;
    &lt;security&gt;
      &lt;user-name&gt;sa&lt;/user-name&gt;
    &lt;/security&gt;
  &lt;/datasource&gt;
&lt;/datasources&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The project comes with DDLs for MySQL and PostgreSQL, to hopefully make it easy to switch away from H2.
Note that switching databases also requires a change to the apiman.properties file.
The following should be changed to appropriate values for your database:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">apiman.hibernate.dialect=io.apiman.manager.api.jpa.ApimanMySQL5Dialect
apiman.hibernate.hbm2ddl.auto=validate</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the following dialects are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>io.apiman.manager.api.jpa.ApimanH2Dialect</code></p>
</li>
<li>
<p><code>io.apiman.manager.api.jpa.ApimanMySQL5Dialect</code></p>
</li>
<li>
<p><code>io.apiman.manager.api.jpa.ApimanOracle12Dialect</code></p>
</li>
<li>
<p><code>io.apiman.manager.api.jpa.ApimanPostgreSQLDialect</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can, of course, set the hbm2ddl property to "update" so that hibernate automatically creates the database structure when it starts up.
Additional DDLs for various databases can be found in <strong>apiman/ddls/</strong>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_custom_api_catalog"><a class="anchor" href="#_custom_api_catalog"></a>Custom API Catalog</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The API Manager has a feature where users can import APIs from a globally configured API Catalog.
By default, Apiman comes with a community catalog that contains a set of common public APIs such as Flickr and Netflix.
When deploying Apiman into an enterprise setting, it is often useful to replace the community API Catalog with something that lists out the internal APIs available within the enterprise.</p>
</div>
<div class="sect2">
<h3 id="_high_level_overview"><a class="anchor" href="#_high_level_overview"></a>High Level Overview</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Describe your enterprise APIs as Apiman API Catalog JSON</p>
</li>
<li>
<p>Make your enterprise API Catalog available in URL form</p>
</li>
<li>
<p>Point Apiman at your enterprise API Catalog</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_create_a_custom_enterprise_api_catalog_json"><a class="anchor" href="#_create_a_custom_enterprise_api_catalog_json"></a>Create a Custom Enterprise API Catalog JSON</h4>
<div class="paragraph">
<p>The first thing you will need to do is express all of your enterprise APIs as a
JSON file.
The format of the JSON file is specific to Apiman.
You can find an example of the format here:</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/apiman/apiman-api-catalog/blob/master/catalog.json" class="bare">https://github.com/apiman/apiman-api-catalog/blob/master/catalog.json</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_make_your_enterprise_api_catalog_available"><a class="anchor" href="#_make_your_enterprise_api_catalog_available"></a>Make Your Enterprise API Catalog Available</h4>
<div class="paragraph">
<p>Now that you have a custom JSON based API Catalog, you need to make it available
at a URL accessible to the API Manager.
This can either be done by stashing it in some web server location so you have an http based URL, or you can store it locally on the API Manager server so as to have a valid file based URL.</p>
</div>
</div>
<div class="sect3">
<h4 id="_point_apiman_at_your_enterprise_api_catalog"><a class="anchor" href="#_point_apiman_at_your_enterprise_api_catalog"></a>Point Apiman at Your Enterprise API Catalog</h4>
<div class="paragraph">
<p>The last step is to make Apiman aware of your custom API Catalog file.  The
catalog is configured in the <code>apiman.properties</code> file via these properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">apiman-manager.api-catalog.type=io.apiman.manager.api.core.catalog.JsonApiCatalog
apiman-manager.api-catalog.catalog-url=https://cdn.rawgit.com/apiman/apiman-api-catalog/1.5.7.Final/catalog.json</code></pre>
</div>
</div>
<div class="paragraph">
<p>Simply change the URL defined by the <code>apiman-manager.api-catalog.catalog-url</code> property and you&#8217;re good to go!</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
For even more customization, you can actually implement your own API Catalog java class.
This approach will allow you to find your APIs in whatever location they happen to be (e.g. a database, registry, etc).
Please see the Developer Guide for more information on how to create a truly custom API Catalog.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_custom_plugin_registry"><a class="anchor" href="#_custom_plugin_registry"></a>Custom Plugin Registry</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The API Manager uses a plugin registry to show admin users a list of available plugins that can be installed.
Apiman comes with an official plugin registry that shows a list of the standard Apiman plugins.
If your enterprise implements a large number of custom policies, you may find it useful to replace the standard registry with one that includes your custom plugins in the list.</p>
</div>
<div class="sect2">
<h3 id="_high_level_overview_2"><a class="anchor" href="#_high_level_overview_2"></a>High Level Overview</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Describe your enterprise plugins in a registry JSON file</p>
</li>
<li>
<p>Make your enterprise plugin registry available in URL form</p>
</li>
<li>
<p>Point Apiman at your enterprise plugin registry</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_create_a_custom_enterprise_plugin_registry_json"><a class="anchor" href="#_create_a_custom_enterprise_plugin_registry_json"></a>Create a Custom Enterprise Plugin Registry JSON</h4>
<div class="paragraph">
<p>The first thing you will need to do is express all of your enterprise plugins as a JSON file.
The format of the JSON file is specific to Apiman.
You can find an example of the format here:</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/apiman/apiman-plugin-registry/blob/master/registry.json" class="bare">https://github.com/apiman/apiman-plugin-registry/blob/master/registry.json</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_make_your_enterprise_plugin_registry_available"><a class="anchor" href="#_make_your_enterprise_plugin_registry_available"></a>Make Your Enterprise Plugin Registry Available</h4>
<div class="paragraph">
<p>Now that you have a custom JSON based plugin registry, you need to make it available at a URL accessible to the API Manager.
This can either be done by stashing it in some web server location so you have an http based URL, or you can store it locally on the API Manager server so as to have a valid file based URL.</p>
</div>
</div>
<div class="sect3">
<h4 id="_point_apiman_at_your_enterprise_plugin_registry"><a class="anchor" href="#_point_apiman_at_your_enterprise_plugin_registry"></a>Point Apiman at Your Enterprise Plugin Registry</h4>
<div class="paragraph">
<p>The last step is to make Apiman aware of your custom plugin registry file.
The registry is configured in the <strong>apiman.properties</strong> file via the following property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">apiman-manager.plugins.registries=https://cdn.rawgit.com/apiman/apiman-plugin-registry/1.5.7.Final/registry.json</code></pre>
</div>
</div>
<div class="paragraph">
<p>The value of this property is a comma-separated list of URLs.
Each URL in the list should point to a valid plugin registry JSON file.
To include your enterprise plugins in the list, simply add the URL to your plugin registry to the end of the existing list.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_property_replacement_in_policy_config"><a class="anchor" href="#_property_replacement_in_policy_config"></a>Property Replacement in Policy Config</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is often useful to externalize certain information that varies from one deployment environment to another.
For example, you may have an LDAP server for authentication, but you have one in the Test deployment environment and a different one in Production.
Rather than configure your Apiman policies differently in each environment (to match the actual LDAP connection info) you can externalize those settings into system properties or environment variables.
Once that is done, you can refer to those properties/variables in your Apiman policy configuration.</p>
</div>
<div class="sect2">
<h3 id="_high_level_overview_3"><a class="anchor" href="#_high_level_overview_3"></a>High Level Overview</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Externalize values into system properties or environment variables</p>
</li>
<li>
<p>Reference a system property or environment variable in a policy</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_externalize_values"><a class="anchor" href="#_externalize_values"></a>Externalize Values</h3>
<div class="paragraph">
<p>Depending on your deployment strategy, how you do this may vary.
If you are using WildFly, for example, you can set system properties in the <code>standalone.xml</code> file or by passing them in via -D parameters on startup (not recommended).
For more information, see:</p>
</div>
<div class="paragraph">
<p><a href="https://docs.wildfly.org/20/Admin_Guide.html#General_configuration_concepts" class="bare">https://docs.wildfly.org/20/Admin_Guide.html#General_configuration_concepts</a></p>
</div>
<div class="paragraph">
<p>Describing all approaches to setting system properties and environment variables
is out of scope for this document.</p>
</div>
</div>
<div class="sect2">
<h3 id="_reference_a_system_property_or_environment_variable"><a class="anchor" href="#_reference_a_system_property_or_environment_variable"></a>Reference a System Property or Environment Variable</h3>
<div class="paragraph">
<p>Once you have some values externalized into system properties or environment
variables, you can reference them easily in your Apiman policies.
All you need to do is use the Ant style syntax to refer to your externalized values, like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">${MY_ENVIRONMENT_VARIABLE}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A variable of this style can be used in any Apiman policy configuration field.
The variables are resolved when the policy configuration is first loaded, and
then cached.
To change a value, you must restart your server.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
When resolving variables, if there is an environment variable with the same
name as a system property, the value of the <strong>system property</strong> will be used.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>Content copyright of respective contributors to the <a href="http://www.github.com/apiman/apiman">Apiman</a> project</p>
  <p>This page was built using the <a href="https://antora.org/" target="_blank">Antora</a> documentation site generator. We are extremely grateful to the Antora team for creating this wonderful project!</p>
</footer>

<link rel="stylesheet" href="../../../_/css/vendor/site-extra.css">
<script src="../../../_/js/vendor/docsearch.min.js"></script>
<script>
var search = docsearch({
  appId: 'AAYCL8CIXA',
  apiKey: '28b004058c83c0723c196eccfb86490d',
  indexName: 'docsearch-apiman',
  inputSelector: '#search-input',
  autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
  algoliaOptions: { hitsPerPage: 10 }
})
</script>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
